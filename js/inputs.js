class TextInput{constructor(t){this.toggleClearButton=this.toggleClearButton.bind(this),this.clearInput=this.clearInput.bind(this),this.rootElem=observeNodeBeforeInit(t),this.input=this.rootElem.querySelector("input.text-input__input"),this.wrapper=this.rootElem.querySelector(".text-input__wrapper"),this.autocompleteList=this.rootElem.querySelector(".text-input__autocomplete"),this.clearButton=this.rootElem.querySelector(".text-input__close-icon"),this.clearButton&&(this.clearButton.type="button"),this.toggleClearButton(),this.input.addEventListener("input",this.toggleClearButton),this.clearButton.addEventListener("click",this.clearInput),this.autocompleteList&&this.initAutocomplete()}initAutocomplete(){this.autocompleteList.classList.add("__removed"),this.input.addEventListener("input",(()=>{this.input.value.length>0?this.toggleAutocompleteList(!0):this.toggleAutocompleteList(!1)})),this.input.addEventListener("blur",(()=>this.toggleAutocompleteList(!1)))}toggleAutocompleteList(t=!1){t&&(this.rootElem.ariaExpanded=!0,this.autocompleteList.classList.remove("__removed")),t||(this.rootElem.ariaExpanded=!1,this.autocompleteList.classList.add("__removed"))}toggleClearButton(){this.input.value.length<1?this.clearButton.classList.add("__removed"):this.clearButton.classList.remove("__removed")}clearInput(){this.input.value="",this.input.dispatchEvent(new Event("input"))}}class Dropdown{constructor(t){this.toggleList=this.toggleList.bind(this),this.onDocumentClick=this.onDocumentClick.bind(this),this.onRadioChange=this.onRadioChange.bind(this),this.rootElem=observeNodeBeforeInit(t),this.button=this.rootElem.querySelector(".dropdown__button"),this.list=this.rootElem.querySelector(".dropdown__list"),this.radioButtons=Array.from(this.list.querySelectorAll("input[type='radio']")),this.text=this.rootElem.querySelector(".dropdown__text"),this.toggleList(!1),this.button.addEventListener("click",this.toggleList),document.addEventListener("click",this.onDocumentClick),this.radioButtons.forEach((t=>t.addEventListener("change",this.onRadioChange)))}toggleList(t="define"){if(!this.button.disabled){if("boolean"!=typeof t){const t=this.rootElem.classList.contains("__shown");this.toggleList(!t)}"boolean"==typeof t&&(t&&this.rootElem.classList.add("__shown"),t||this.rootElem.classList.remove("__shown"))}}onDocumentClick(t){t.target!==this.button&&!t.target.closest(".dropdown__button")&&this.toggleList(!1)}destroy(){this.button.removeEventListener("click",this.toggleList),document.removeEventListener("click",this.onDocumentClick)}onRadioChange(t){const e=t.target.value;this.text.innerHTML=e}}class JobsFilter{constructor(t){this.rootElem=observeNodeBeforeInit(t),setTimeout((()=>{const t=Array.from(this.rootElem.querySelectorAll(".jobs-filter__dropdown"));this.groupsData=t.map((t=>{const e=t.querySelectorAll("input[type='checkbox']"),i=t.querySelectorAll("input[type='radio']"),o=Array.from(e).concat(Array.from(i)),s=t.querySelector(".jobs-filter__group-button");return{group:t,inputButtons:o,groupButton:s,checkedInputs:[]}})),this.initGroupsData(),this.initAllInputs()}),250)}initGroupsData(){function t(t){const e=t.inputButtons.filter((t=>t.checked));t.checkedInputs=e.filter((t=>!t.classList.contains("__no-count"))),this.setValues(t)}t=t.bind(this),this.groupsData.forEach((e=>{t(e),this.setValues(e),e.inputButtons.forEach((i=>{i.addEventListener("change",(()=>t(e)))}))}))}initAllInputs(){const t=this.rootElem.querySelectorAll("input[type='checkbox']"),e=this.rootElem.querySelectorAll("input[type='radio']");Array.from(t).concat(Array.from(e)).forEach((t=>t.addEventListener("change",this.setFilterShowAmount.bind(this))));const i=this.rootElem.querySelector(".jobs-filter__button");if(!i)return;let o=i.querySelector(".badge");if(!o){o=createElement("span","jobs-filter__badge badge"),i.append(o);new MutationObserver((()=>{i.classList.contains("__show-more-active")?o.classList.add("__removed"):"0"!=o.innerHTML&&o.classList.remove("__removed")})).observe(i,{attributes:!0})}this.setFilterShowAmount()}setValues(t){const e=t.checkedInputs.length;let i=t.groupButton.querySelector(".badge");i||(i=createElement("span","jobs-filter__badge badge"),t.groupButton.append(i)),i.innerHTML=e,e<1?i.classList.add("__removed"):i.classList.remove("__removed")}setFilterShowAmount(){const t=this.rootElem.querySelector(".jobs-filter__button");if(!t)return;const e=Array.from(this.rootElem.querySelectorAll("input[type='checkbox']")),i=Array.from(this.rootElem.querySelectorAll("input[type='radio']")),o=e.concat(i).filter((t=>t.checked&&!t.classList.contains("__no-count"))).length,s=t.querySelector(".badge");s&&(s.innerHTML=o,o<1&&s.classList.add("__removed"))}}class JobsSearchForm{constructor(t){this.onLocationInput=this.onLocationInput.bind(this),this.rootElem=observeNodeBeforeInit(t),this.keywordsContainer=this.rootElem.querySelector(".jobs-search-form__search-input"),this.proximityContainer=this.rootElem.querySelector(".jobs-search-form__proximity-container"),this.radiusContainer=this.rootElem.querySelector(".jobs-search-form__proximity"),this.submitContainer=this.rootElem.querySelector(".jobs-search-form__submit-group"),this.keywordsInput=this.keywordsContainer.querySelector("#keywords"),this.locationInput=this.proximityContainer.querySelector("#locations"),this.radiusButton=this.radiusContainer.querySelector(".dropdown__button"),this.initMobileHiding(),this.onLocationInput(),this.locationInput.addEventListener("input",this.onLocationInput)}initMobileHiding(){this.keywordsInput.addEventListener("focus",(()=>{this.proximityContainer.classList.remove("__mobile-hidden"),this.submitContainer.classList.remove("__mobile-hidden")}))}onLocationInput(){this.locationInput.value.trim().length<1?this.radiusButton.setAttribute("disabled",""):this.radiusButton.removeAttribute("disabled")}}class ValidationForm{constructor(t){this.submit=this.submit.bind(this),this.formElementsKeys=["input"],this.rootElem=observeNodeBeforeInit(t),this.boxError=this.rootElem.querySelector(".info-box--error"),this.submitButton=this.rootElem.querySelector(".submit-button"),this.boxError.classList.add("__removed"),this.submitButton.addEventListener("click",this.submit)}submit(t){const e=inittedInputs.filter((t=>{let e=!1;return this.formElementsKeys.forEach((i=>{t[i]&&t[i].closest(".validation-form")===this.rootElem&&t[i]!==this.submitButton&&(e=!0)})),e})),i=[];e.forEach((t=>{t.validate(),0==t.isValid&&i.push(t)})),i.length>0&&t.preventDefault()}}class TextFormElement{constructor(t){this.validate=this.validate.bind(this),this.rootElem=observeNodeBeforeInit(t),this.label=this.rootElem.querySelector(".label"),this.input=this.rootElem.querySelector(".form-element__input"),this.validationMessage=this.rootElem.querySelector(".form-element__validation-message"),this.validationMessage.classList.add("__removed"),this.getValidationConditions()}getValidationConditions(){const t=this.input.dataset.validationMask;this.validationMask=!!t&&new RegExp(t);const e=this.input.dataset.validationLength;this.validationLength=!!e&&e.split(", ")}validate(){let t=!1;const e=this.input.value;if(this.validationMask&&(t=!!this.validationMask.test(e)),this.validationLength){const i=parseInt(this.validationLength[0]),o=parseInt(this.validationLength[1])||i;t=e>=i&&e<=o}this.setValidationState(t),this.input.addEventListener("input",this.validate)}setValidationState(t){this.isValid=t,t?this.validationMessage.classList.add("__removed"):this.validationMessage.classList.remove("__removed")}}class PasswordFormElement extends TextFormElement{constructor(t){super(t),this.onInput=this.onInput.bind(this),this.info=document.querySelector(".password-input__info"),this.info&&this.info.classList.add("__removed"),this.input.addEventListener("focus",(()=>this.info.classList.remove("__removed"))),this.input.addEventListener("input",this.onInput)}onInput(){const t=this.input.value;this.input.value=t.replace(/[\sа-яА-ЯёЁ]/,"")}validate(){let t=!1;const e=this.input.value,i=e.match(/\d/g)||[],o=e.match(/[a-z]/g)||[],s=e.match(/[A-Z]/g)||[],n=e.length>=8,r=i.length>0,a=o.length>0&&s.length>0;t=!!(n&&r&&a),this.input.addEventListener("input",this.validate),super.setValidationState(t)}}const inputSelectors=[{selector:".text-input",classInstance:TextInput},{selector:".dropdown",classInstance:Dropdown},{selector:".jobs-filter",classInstance:JobsFilter},{selector:".jobs-search-form",classInstance:JobsSearchForm},{selector:".validation-form",classInstance:ValidationForm},{selector:".form-element--text",classInstance:TextFormElement},{selector:".password-input",classInstance:PasswordFormElement}];doInit(inputSelectors),inittingSelectors=inittingSelectors.concat(inputSelectors);